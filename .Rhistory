setwd("/Applications/MAMP/htdocs/Dissertation")
setwd("/Applications/MAMP/htdocs/Dissertation")
#reading data
tier2 <- read.csv("sponsorList.csv", header=T)
tier2 <- read.csv("companyData.csv", header=T)
company_house <- read.csv("companyData.csv", header=T)
#reading data
tier2 <- read.csv("sponsorList.csv", header=T)
View(tier2)
View(company_house)
company_house <-company_house[order(company_name),]
View(company_house)
company_house <-company_house[order(companyhouse$company_name),]
company_house <-company_house[order(company_house$company_name),]
View(company_house)
View(company_house)
company_house <- company_house[,c(-7,-8,-9,-11)]
View(company_house)
a <- x[c(1,2,3),c(1,2,3)]
a <- a[c(1,2,3),c(1,2,3)]
a <- [c(1,2,3),c(1,2,3)]
a <- [c(1,2,3),c(1,2,3)]
a <- [1,2]
test <- data.frame(sp=c(rep(letters[1:10],2)),t=c(rep(1:3,20)),y=c(rep(2000:2008,len=20)),AUC=1:20)
View(test)
test2 <- data.frame(t=c(rep(1:3,2,9)),y=c(rep(2000:2008,len=9)),ppt=c(1:9),temp=c(11:19))
View(test2)
merge(test,test2,by=c('t','y'),all.x = T)
z <- merge(test,test2,by=c('t','y'),all.x = T)
View(z)
test
View(test)
View(test2)
View(z)
View(test)
View(test2)
View(z)
View(test)
View(test2)
View(test)
View(test2)
View(z)
View(test2)
View(test)
View(test2)
View(z)
test <- data.frame(sp=c(1,2,3,2)))
test <- data.frame(sp=c(1,2,3,2)),AUC=1:20)
test <- data.frame(sp=c(1,2,3,2)))
test <- data.frame(sp=c(1,2,3,2))
View(test)
test <- data.frame(sp=c(1,2,3,2)),AUC=1:20)
test <- data.frame(sp=c(1,2,3,2)),AUC=1:20))
test <- data.frame(sp=c(1,2,3,2),AUC=1:20)
View(test)
test <- data.frame(sp=AUC=1:10,AUC=1:20)
test <- data.frame(sp=1:10,AUC=1:20)
View(test)
test2 <- data.frame(sp=1:8,AUC=1:20)
z <- merge(test,test2,by=c('sp'),all.x = T)
z <- merge(test,test2,by=c('AUC'),all.x = T)
View(test)
test <- data.frame(sp=8:28,AUC=1:20)
test2 <- data.frame(sp=10:30,AUC=1:20)
z <- merge(test,test2,by=c('sp','y'),all.x = T)
View(test)
test <- data.frame(sp=8:28,AUC=1:20)
test <- data.frame(sp=8:28,AUC=1:20)
test3 <- data.frame(sp=8:28,AUC=1:20)
test <- data.frame(sp=8:28,AUC=1:20)
View(test)
test <- data.frame(sp=8:27,AUC=1:20)
test2 <- data.frame(sp=10:29,AUC=1:20)
z <- merge(test,test2,by=c('sp','y'),all.x = T)
View(test)
z <- merge(test,test2,by=c('sp'),all.x = T)
test
View(z)
View(test2)
View(z)
View(test2)
View(z)
View(test)
View(z)
View(test2)
View(z)
company_house
full_company_info <- merge(tier2,company_house,by=c('company_name'),all.x = T)
View(company_house)
company_house <-company_house[order(company_house$company_name),]
View(company_house)
View(company_house)
company_house <- company_house[,c(-3,-4,-8,-9,-10,-12,-13,-14,-15,-16,-17,-18,-19,-20,-21,-22,-27,-28,-30,-31,-32,-33,-34,-35,-36,-37,-38,-39,-40,-41,-42,-43,-44,-45,-46,-47,-48,-49,-50,-51)]
View(company_house)
full_company_info <- merge(tier2,company_house,by=c('company_name'),all.x = T)
View(tier2)
View(tier2)
View(tier2)
View(company_house)
company_house1 <- read.csv("companyData.csv", header=T)
source('/Applications/MAMP/htdocs/Dissertation/Cleaning data.R')
View(tier2)
View(company_house)
View(company_house)
View(company_house)
company_house <-company_house[order(company_house$company_name),]
company_house <- company_house[,c(-3,-4,-8,-9,-10,-12,-13,-14,-15,-16,-17,-18,-19,-20,-21,-22,-27,-28,-30,-31,-32,-33,-34,-35,-36,-37,-38,-39,-40,-41,-42,-43,-44,-45,-46,-47,-48,-49,-50,-51)]
write.csv(company_house, file='company_detail.csv')
View(company_house)
source('/Applications/MAMP/htdocs/Dissertation/Cleaning data.R')
View(company_house)
View(company_house)
View(company_house)
View(tier2)
View(company_house)
setwd("/Applications/MAMP/htdocs/Dissertation")
install.packages("pdftools")
library(pdftools)
library("pdftools")
source('/Applications/MAMP/htdocs/Dissertation/Cleaning data.R')
download.file("https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/682406/2018-02-19_Tier_2_5_Register_of_Sponsors.pdf",".2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
download.file("https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/682406/2018-02-19_Tier_2_5_Register_of_Sponsors.pdf","./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
text <- pdf_text("./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
text
download.file("https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/682406/2018-02-19_Tier_2_5_Register_of_Sponsors.pdf","./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
text <- pdf_text("./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
source('/Applications/MAMP/htdocs/Dissertation/Cleaning data.R')
full_company_info <- merge(tier2,company_house,by=c('company_name'),all.x = T)
a <- merge(tier2,company_house,by=c('company_name'))
View(company_house)
text
text2 <- strsplit(text, "\n")
View(text2)
View(text2)
library(stringr)
doc_split <- strsplit(text, "  ")
View(doc_split)
text
text2 <- strsplit(text, "\n")
View(text2)
text2[[1]]
typeof(text2)
head(text2[[1]])
head(text2[[2]])
strsplit(head(text2[[2]]), "\n")
a <- strsplit(head(text2[[2]]), "\n")
View(a)
head(a[[2]])
head(a[[1]])
head(a[[2]])
head(a[[3]])
head(a[[4]])
a[[1]]
a[[6]]
a[[5]]
a <- strsplit(head(text2[[2]]), "\t")
a <- strsplit(head(text2[[2]]), "\t")
head(a[[4]])
a <- strsplit(head(text2[[2]]), " ")
head(a[[4]])
a <- strsplit(head(text2[[2]]), "        ")
head(a[[4]])
a <- strsplit(head(text2[[2]]), "\n")
head(a[[4]])
head(a[[3]])
a <- strsplit(head(text2[[2]]), "Tier 2 General")
head(a[[3]])
head(a[[4]])
a <- strsplit(head(text2[[2]]), " Tier 2 (A rating) Tier 2 General")
head(a[[4]])
head(a[[3]])
a <- strsplit(head(text2[[2]]), "/n")
head(a[[3]])
type.of(a[[3]])
typeof(a[[3]])
typeof(a)
a
b <- str_sub(a, 0, 27)
b
a
b <- str_sub(text2, 0, 27)
b
View(text2)
b <- str_sub(text, 0, 27)
b
b <- str_sub(text[[1]], 0, 27)
b
b <- str_sub(text[[2]], 0, 27)
b
text
b <- str_sub(text2[[1]], 0, 27)
b
source('/Applications/MAMP/htdocs/Dissertation/Cleaning data.R')
b <- str_sub(text2[[2]], 0, 27)
b
b <- str_sub(text2[[1909]], 0, 27)
b
text
x$company_name <- b
x <- as.data.frame(x)
x<- 0
x$company_name <- b
View(x)
x[[1]]
x[[2]]
length(x)
length(x[[]])
View(x)
x[["company_name"]]
x[[0]] <- NULL
View(x)
typeof(list)
typeof(b)
typeof(text2)
length(text2)
for (v in text2) {
v
}
v
type(v)
typeof(v)
v
for (v in b) {
v
}
v
b
for (v in text2) {
v
}
v
q <- str_sub(v, 0, 27)
q
for (v in text2) {
q <- str_sub(v, 0, 27)
}
q
for (v in text2) {
p <- str_sub(v, 0, 27)
}
p
for (v in text2) {
p$v <- str_sub(v, 0, 27)
}
text2
dim(b)[1]
o <- c(a,j,g),c(u,i,o)
o <- [c(a,j,g),c(u,i,o)]
o <- [a,j,g,c(u,i,o)]
o <- [a,j,g,u,i,o]
o <- [(a,j,g),(u,i,o)]
o = [(a,j,g),(u,i,o)]
> s = c("aa", "bb", "cc")
s = c("aa", "bb", "cc")
s
s = c("aa", "bb", "cc"),c("aa", "bb", "cc")
s = data.frame(n, s, b)
n = c(2, 3, 5)
s = c("aa", "bb", "cc")
o = c(TRUE, FALSE, TRUE)
df = data.frame(n, s, o)
df
dim(df)[1]
dim(df)[2]
yy <- 0
for(i in 1:dim(text2)[1]) {
yy[i]  <- str_sub(v, 0, 27)
}
yy[]  <- str_sub(v, 0, 27)
yy
yy  <- str_sub(v, 0, 27)
for(i in 1:dim(text2)[1]) {
yy  <- str_sub(v, 0, 27)
}
for(i in 1:dim(text2)[1]) {
rbind.data.frame(yy)  <- str_sub(v, 0, 27)
}
yy
rbind.data.frame(yy$i)  <- str_sub(v, 0, 27)
for(i in 1:dim(text2)[1]) {
rbind.data.frame(yy$i)  <- str_sub(v, 0, 27)
}
for(i in 1:dim(text2)[1]) {
rbind.data.frame(yy, str_sub(i, 0, 27))
}
dim(text2)[1]
text2
dim(text2)
typeof(text2)
for(i in 1:length(text2)) {
rbind.data.frame(yy, str_sub(text2[[i]], 0, 27))
}
yy
rbind.data.frame(yy, str_sub(text2[[i]], 0, 27))
yy
for(i in 1:length(text2)) {
rbind.data.frame(yy[i], str_sub(text2[[i]], 0, 27))
}
yy
yy[[2]]
yy
length(yy)
length(text2)
str_sub(text2[[2]], 0, 27)
for(i in 1:length(text2)) {
print(i)
}
yy <- 0
yy <- 0
yy = data.frame(yy)
for(i in 1:length(text2)) {
for(i in 1:length(text2)) {
for(i in 1:length(text2)) {
rbind.data.frame(yy[i], str_sub(text2[[i]], 0, 27))
}
for(i in 1:length(text2)) {
rbind.data.frame(yy[i], str_sub(text2[[i]], 0, 27))
}
yy <- 0
for(i in 1:length(text2)) {
rbind.data.frame(yy[i], str_sub(text2[[i]], 0, 27))
}
rbind(yy[i], str_sub(text2[[i]], 0, 27))
rbind(yy, str_sub(text2[[i]], 0, 27))
for(i in 1:length(text2)) {
rbind(yy, str_sub(text2[[i]], 0, 27))
}
yy <- 0
yy = data.frame(yy)
for(i in 1:length(text2)) {
rbind(yy, str_sub(text2[[i]], 0, 27))
}
for(i in 1:length(text2)) {
rbind(yy, data.framestr_sub(text2[[i]], 0, 27))
}
#make a list object that will include objects for do.call()
my.list <- list()
my
typeof(my)
#make a list object that will include objects for do.call()
my.list <- list()
#make a list object that will include objects for do.call()
my.list <- list()
typeof(my)
typeof(my)
#make a list object that will include objects for do.call()
my <- list()
typeof(my)
list()
rbind(yy,c(1,2,3))
View(x)
View(yy)
yy
yy
print (hi)
print (hi)
print (yy)
source('/Applications/MAMP/htdocs/Dissertation/Cleaning data.R')
source('/Applications/MAMP/htdocs/Dissertation/Cleaning data.R')
company_house <- read.csv("companyData.csv", header=T)
company_house <- read.csv("companyData.csv", header=T)
company_house <-company_house[order(company_house$company_name),]
company_house <- company_house[,c(-3,-4,-8,-9,-10,-12,-13,-14,-15,-16,-17,-18,-19,-20,-21,-22,-27,-28,-30,-31,-32,-33,-34,-35,-36,-37,-38,-39,-40,-41,-42,-43,-44,-45,-46,-47,-48,-49,-50,-51)]
full_company_info <- merge(tier2,company_house,by=c('company_name'),all.x = T)
library("pdftools")
download.file("https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/682406/2018-02-19_Tier_2_5_Register_of_Sponsors.pdf","./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
text <- pdf_text("./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
text2 <- strsplit(text, "\n")
typeof(text2)
head(text2[[2]])
a <- strsplit(head(text2[[2]]), "/n")
head(a[[3]])
b <- str_sub(text2[[1909]], 0, 27)
a <- strsplit(head(text2[[1]]), "/n")
head(a[[1]])
head(a[[1]])
head(a[[1]])
head(a[[2]])
head(a[[3]])
head(a)
length(text2)
yy <- 0
yy <- 0
yy = data.frame(yy)
xx <- 0
xx = data.frame(xx)
for(i in 1:length(text2)) {
xx<- str_sub(text2[[i]], 0, 27)
rbind(yy, xx)
}
library("stringr")
for(i in 1:length(text2)) {
xx<- str_sub(text2[[i]], 0, 27)
rbind(yy, xx)
}
for(i in 1:length(text2)) {
xx<- str_sub(text2[[i]], 0, 27)
xx <- data.frame(xx)
rbind(yy, xx)
}
remove(xx)
for(i in 1:length(text2)) {
xx<- str_sub(text2[[i]], 0, 27)
xx <- data.frame(xx)
rbind(yy, xx)
}
remove(xx)
for(i in 1:length(text2)) {
xx<- str_sub(text2[[i]], 0, 27)
xx <- data.frame(xx)
rbind(yy, xx)
}
View(xx)
View(yy)
View(yy)
View(xx)
for(i in 2:length(text2)) {
xx<- str_sub(text2[[i]], 0, 27)
xx <- data.frame(xx)
}
View(xx)
for(i in 3:length(text2)) {
xx<- str_sub(text2[[i]], 0, 27)
xx <- data.frame(xx)
}
View(xx)
a <- strsplit(head(text2[[1]]), "/n")
View(text2)
text2[[1]]
for(i in 1:length(text2)) {
for(i in 1:length(text2)) {
View(a)
xx <- 0
yy <- 0
xx = data.frame(xx)
yy = data.frame(yy)
for(i in 1:length(text2)) {
yy[i] <- data.frame(yy[i])
}
View(yy)
View(yy)
xx <- 0
yy <- 0
xx = data.frame(xx)
yy = data.frame(yy)
length(text2)
for(i in 1:length(text2)) {
yy[i] <- data.frame(yy[i])
}
length(text2)
for(i in 1:length(text2)) {
yy[i] <- xx[i, str_sub(text2[[i]], 0, 27)]
yy[i] <- data.frame(yy[i])
}
View(yy)
View(yy)
typeof(text2)
source('/Applications/MAMP/htdocs/Dissertation/Cleaning data.R')
