View(city)
city <- unique( result[ ,5] )
result[ ,5]
city <- result$town
View(result)
city <- result$town
city <- unique( city[[1]])
city <- as.data.frame(city)
View(city)
city <- result$town
city <- as.data.frame(city)
city <- unique( city[[1]])
sectors <- unique( city[ ,1] )
city <- result$town
sectors <- unique( city[ ,1] )
city <- result$town
city <- as.data.frame(city)
sectors <- unique( city[ ,1] )
city <- result$town
city <- as.data.frame(city)
View(city)
hist(result$town, unique( result$industry[!grepl("Other", result$industry) ))
result$industry = sectors
result$industry == sectors
result[result$industry == sectors]
result[,result$industry == sectors]
query <- "SELECT DISTINCT industry FROM company"
result <- dbGetQuery(con, query)
result <- as.data.frame(result)
typeof(result)
View(result)
query <- "SELECT * FROM company"
industry <- "SELECT DISTINCT industry FROM company"
result <- dbGetQuery(con, query)
industry <- dbGetQuery(con, industry)
str(result)
result <- as.data.frame(result)
View(industry)
View(industry)
t <- paste("select * from company where industry = ", industry, ";",sep="")
t <- dbGetQuery(con, t)
con = dbConnect(MySQL(), user='root', password='root', dbname='jobWizard', host='localhost',unix.sock="/Applications/MAMP/tmp/mysql/mysql.sock")
dbListTables(con)
t <- paste("select * from company where industry = ", industry, ";",sep="")
t <- dbGetQuery(con, t)
t
t <- paste("select * from company where industry = ", c("Other"), ";",sep="")
t <- dbGetQuery(con, t)
query <- "SELECT * FROM company"
industry <- "SELECT DISTINCT industry FROM company"
t <- paste("select * from company where industry = ", industry, ";",sep="")
t <- dbGetQuery(con, t)
t
t <- paste("select * from SELECT DISTINCT industry FROM company")
t <- "select * from SELECT DISTINCT industry FROM company"
t
t <- dbGetQuery(con, t)
t <- "select * from (SELECT DISTINCT industry FROM company)"
t
result <- dbGetQuery(con, query)
industry <- dbGetQuery(con, industry)
t <- dbGetQuery(con, t)
industry-company <- "select * from company where `industry` in (SELECT DISTINCT `industry` FROM company)"
industryCompany <- "select * from company where `industry` in (SELECT DISTINCT `industry` FROM company)"
industryCompany <- dbGetQuery(con, industryCompany)
industryCompany <- "select * from company where `industry` in (SELECT DISTINCT `industry` FROM company)"
industryCompany <- "select * from company where `industry` in (SELECT DISTINCT `industry` FROM company where `industry != `Other`)"
industryCompany <- dbGetQuery(con, industryCompany)
industryCompany <- dbGetQuery(con, industryCompany)
industryCompany <- "select * from company where `industry` in (SELECT DISTINCT `industry` FROM company WHERE industry !='Other')"
industryCompany <- "select * from company where `industry` in (SELECT DISTINCT `industry` FROM company WHERE industry !='Other');"
industryCompany <- dbGetQuery(con, industryCompany)
View(industryCompany)
#sectors <- result$industry[!grepl("Other", result$industry)]
#sectors <- as.data.frame(sectors)
# unique first column
#sectors <- unique( sectors[ ,1] )
#sectors <- as.data.frame(sectors)
hist(result$industry)
#sectors <- result$industry[!grepl("Other", result$industry)]
#sectors <- as.data.frame(sectors)
# unique first column
#sectors <- unique( sectors[ ,1] )
#sectors <- as.data.frame(sectors)
hist(sum(result)
#sectors <- result$industry[!grepl("Other", result$industry)]
#sectors <- as.data.frame(sectors)
# unique first column
#sectors <- unique( sectors[ ,1] )
#sectors <- as.data.frame(sectors)
hist(sum(result))
#sectors <- result$industry[!grepl("Other", result$industry)]
#sectors <- as.data.frame(sectors)
# unique first column
#sectors <- unique( sectors[ ,1] )
#sectors <- as.data.frame(sectors)
hist(sum(result))
industryCompany <- "select * from company where `industry` in (SELECT DISTINCT `industry` FROM company WHERE industry !='Other');"
industryCompany <- dbGetQuery(con, industryCompany)
industryCompany <- as.data.frame(industryCompany)
View(industryCompany)
#sectors <- result$industry[!grepl("Other", result$industry)]
#sectors <- as.data.frame(sectors)
# unique first column
#sectors <- unique( sectors[ ,1] )
#sectors <- as.data.frame(sectors)
hist(sum(result$company_id), result$industry)
#sectors <- result$industry[!grepl("Other", result$industry)]
#sectors <- as.data.frame(sectors)
# unique first column
#sectors <- unique( sectors[ ,1] )
#sectors <- as.data.frame(sectors)
qplot(sum(result$company_id), result$industry)
#sectors <- result$industry[!grepl("Other", result$industry)]
#sectors <- as.data.frame(sectors)
# unique first column
#sectors <- unique( sectors[ ,1] )
#sectors <- as.data.frame(sectors)
qplot(result$industry,sum(result$company_id))
#sectors <- result$industry[!grepl("Other", result$industry)]
#sectors <- as.data.frame(sectors)
# unique first column
#sectors <- unique( sectors[ ,1] )
#sectors <- as.data.frame(sectors)
pairs.panels(result)
r <- industryCompany
dbWriteTable(con, "R",r,overwrite=TRUE, append=FALSE)
#download.file("https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/682406/2018-02-19_Tier_2_5_Register_of_Sponsors.pdf","./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
rawText <- pdf_text("./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
library("pdftools")
library("stringr")
library("tm")
library("dplyr")
#download.file("https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/682406/2018-02-19_Tier_2_5_Register_of_Sponsors.pdf","./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
rawText <- pdf_text("./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
setwd("/Applications/MAMP/htdocs/Dissertation")
#download.file("https://www.gov.uk/government/uploads/system/uploads/attachment_data/file/682406/2018-02-19_Tier_2_5_Register_of_Sponsors.pdf","./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
rawText <- pdf_text("./2018-02-19_Tier_2_5_Register_of_Sponsors.pdf")
doc <- strsplit(rawText, "\n")
head(splitedByLineText)
header_row <- grep("^No. of Sponsors on Register Licensed under Tiers 2 and 5:", doc[[1]])
header_row
doc[[1]]
#header removal
doc[[1]] <- doc[[1]][(header_row + 1):length(doc[[1]])]
head(doc)
tail(doc)
length(doc)
#footer removal
footer_row_1 <- grep("Summary", doc[[1909]])
footer_row_2 <- grep("Total Number of Sponsors registered under Tiers 2 and 5",doc[[1909]])
footer_row_1
footer_row_2
doc[[1909]] <- doc[[1909]][-c(footer_row_1:footer_row_2)]
head(doc)
tail(doc)
length(doc[[1]])
tier2 <- 0
tier2 <- data.frame(tier2)
for (i in 1:length(doc)){
for (j in 1:length(doc[[i]]))
{
tier2 <- c(tier2,strsplit(doc[[i]][j], "   ")[[1]][1])
}
}
tier3 <- tier2
tier2 <- tier3
for (i in 1:length(tier2)){
if((str_detect(tier2[[i]], "  Organisation Name")) || (str_detect(tier2[[i]], "^ $")) || (str_detect(tier2[[i]], "^0$")) || (str_detect(tier2[[i]], "^$"))  ){
tier2[[i]] <- NULL
}
}
for (i in 1:length(tier2)){
(str_detect(tier2[[i]], "^$"))
}
str_detect(tier2[[i]], "^$")
i
for (i in 1:length(tier2)){
str_detect(tier2[[i]], "^$")
}
i
for (i in 1:length(tier2)){
print(str_detect(tier2[[i]], "^$"))
}
l <- length(tier2)
tier2 <- tier3
l <- length(tier2)
for (i in 1:l){
if((str_detect(tier2[[i]], "  Organisation Name")) || (str_detect(tier2[[i]], "^ $")) || (str_detect(tier2[[i]], "^0$")) || (str_detect(tier2[[i]], "^$"))  ){
tier2[[i]] <- NULL
}
}
tier3
for (i in 1:l){
if((str_detect(tier2[[i]], "  Organisation Name")) || (str_detect(tier2[[i]], "^ $")) || (str_detect(tier2[[i]], "^0$")) || (str_detect(tier2[[i]], "^$"))  ){
tier2[[i]][1] <- NULL
}
}
for (i in 1:length(tier2)){
if((str_detect(tier2[[i]], "  Organisation Name")) || (str_detect(tier2[[i]], "^ $")) || (str_detect(tier2[[i]], "^0$")) || (str_detect(tier2[[i]], "^$"))  ){
tier2[[i]] <- NULL
}
}
names <- tier3
View(names)
for (i in 1:length(tier2)){
if((str_detect(tier2[[i]], "  Organisation Name")) || (str_detect(tier2[[i]], "^ $")) || (str_detect(tier2[[i]], "^0$")) || (str_detect(tier2[[i]], "^$"))  ){
tier2[[i]] <- NULL
}
}
for (i in 1:length(tier2)){
if((str_detect(tier2[[i]], "  Organisation Name")) || (str_detect(tier2[[i]], "^ $")) || (str_detect(tier2[[i]], "^0$")) || (str_detect(tier2[[i]], "^$"))  ){
tier2[[i]] <- NULL
}
}
for (i in 1:length(tier2)){
if( (str_detect(tier2[[i]], "^$"))  ){
tier2[[i]] <- NULL
}
}
for (i in 1:length(tier2)){
if((str_detect(tier2[[i]], "  Organisation Name")) || (str_detect(tier2[[i]], "^ $")) || (str_detect(tier2[[i]], "^0$")) || (str_detect(tier2[[i]], "^$"))  ){
tier2[[i]] <- NULL
}
}
View(tier2)
for (i in 1:length(tier2)){
print(str_detect(tier2[[i]], "^$"))
}
print(if(str_detect(tier2[[i]], "^$")))
for (i in 1:length(tier2)){
print( if( str_detect(tier2[[i]], "^$") == TRUE) )
for (i in 1:length(tier2)){
print( if( str_detect(tier2[[i]], "^$") == TRUE) )
}
for (i in 1:length(tier2)){
if( str_detect(tier2[[i]], "^$") == TRUE) ){
print("True")
}
}
for (i in 1:length(tier2)){
if( str_detect(tier2[[i]], "^$") == TRUE) {
print("True")
}
}
print("True")
if( str_detect(tier2[[i]], "^$") == TRUE) {
print("True")
}
for (i in 1:length(tier2)){
if( str_detect(tier2[[i]], "^$") == TRUE) {
print("True")
}
}
for (y in 1:length(tier2)){
if( str_detect(tier2[[y]], "^$") == TRUE) {
print("True")
}
}
for (i in 1:length(tier2)){
print(str_detect(tier2[[i]], "^$"))
}
View(tier2)
tier2[[4]]
tier2[[3]]
tier2[[5]]
tier2[[4]]
library(RMySQL)
library(dbConnect)
tier2 <- as.data.frame(tier2)
View(tier2)
as.factor(Tier3[[1]])
tier3 <- tier2
as.factor(Tier3[[1]])
as.factor(tier3[[1]])
View(tier3)
tyoeof(tier2)
typeof(tier2)
tier2 <- as.data.frame(tier2)
typeof(tier2)
x<- 0
x <- data.frame(x)
x <- cbind(x,data.frame(tier2))
View(x)
View(x)
x <- rbind(x,data.frame(tier2))
x<- 0
x <- data.frame(x)
x <- rbind(x,data.frame(tier2))
nrow(tier2)
nrow(tier2)
nrow(tier2)
View(x)
x <- rbind(x,data.frame(tier2))
x <- rbind(x,tier2)
nrow(tier2)
tier2
head(tier2)
tier2 <- 0
tier2 <- data.frame(tier2)
for (i in 1:length(doc)){
for (j in 1:length(doc[[i]]))
{
tier2 <- c(tier2,strsplit(doc[[i]][j], "   ")[[1]][1])
}
}
tier3 <- tier2
new <- data.frame(new)
new <- 0
new <- data.frame(new)
for(o in 1:length(tier2)){
new$companyname <- tier2[[i]]
}
View(new)
for(o in 1:length(tier2)){
new$companyname <- tier2[[o]]
}
o
for(o in 1:length(tier2)){
new$companyname <- tier2[[o]]
}
View(new)
print(tier2[[o]])
print(tier2[[1]])
print(tier2[[2]])
for(o in 1:length(tier2)){
print(tier2[[o]])
}
for(o in 1:length(tier2)){
new$c <- tier2[[o]])
}
for(o in 1:length(tier2)){
new$c <- tier2[[o]]
}
View(new)
for(o in 1:length(tier2)){
print(tier2[[o]])
}
for(o in 1:length(tier2)){
x <- tier2[[o]])
}
for(o in 1:length(tier2)){
x <- tier2[[o]]
}
for(o in 1:length(tier2)){
x$c[i] <- tier2[[o]]
}
new <- 0
new <- data.frame(new)
for(o in 1:length(tier2)){
new$c[i] <- tier2[[o]]
}
for(o in 1:length(tier2)){
new$c[o] <- tier2[[o]]
}
for(o in 1:length(tier2)){
new$c <- tier2[[o]]
}
View(new)
for(o in 1:length(tier2)){
new$c <- o
}
View(new)
for(o in 1:length(tier2)){
new <- cbind(new,data.frame(o))
}
new <- 0
new <- data.frame(new)
for(o in 1:length(tier2)){
new <- rbind(new,1)
}
View(new)
new <- 0
new <- data.frame(new)
for(o in 1:length(tier2)){
new <- rbind(new,tier2[[o]])
}
View(new)
is.na(new)
if(is.na(new) == TRUE)
if(is.na(new) == TRUE){
print("Yes")
}
if(is.na(new)){
print("Yes")
}
is.na(new)
new
new
head(new)
length(new)
View(new)
typeof(new)
new <- data.frame(new)
typeof(new)
typeof(new)
new <- data.frame(new)
typeof(new)
new$a <- new
new <- data.frame(new)
View(new)
typeof(new)
new <- data.frame(new)
typeof(new)
new <- data.frame(new)
new <- as.data.frame(new)
typeof(new)
new
new$a <-NULL
new
View(new)
for (i in 1:length(new)){
if((str_detect(new, "  Organisation Name")) || (str_detect(tier2[[i]], "^ $")) || (str_detect(tier2[[i]], "^0$")) || (str_detect(tier2[[i]], "^$"))  ){
print(R)
}
}
for (i in 1:length(new)){
if((str_detect(new, "  Organisation Name")) || (str_detect(tier2[[i]], "^ $")) || (str_detect(tier2[[i]], "^0$")) || (str_detect(tier2[[i]], "^$"))  ){
print("R")
}
}
new[1]
new[[1]]
new[1]
new[,1]
new[1,]
for (i in 1:length(new)){
if((str_detect(new, "  Organisation Name")) || (new[i,], "^ $")) || (str_detect(new[i,], "^0$")) || (str_detect(new[i,], "^$"))  ){
new[i,] <- NULL
}
}
for (i in 1:length(new)){
if((str_detect(new[i,], "  Organisation Name")) || (new[i,], "^ $")) || (str_detect(new[i,], "^0$")) || (str_detect(new[i,], "^$"))  ){
new[i,] <- NULL
}
}
for (i in length(tier3):1){
if( (str_detect(tier3[[i]], "  Organisation Name")) || (str_detect(tier3[[i]], "^ $")) || (str_detect(tier3[[i]], "^0$")) || (str_detect(tier3[[i]], "^$"))  ){
tier3[[i]] <- NULL
}
}
View(tier3)
tier2 <- tier3
new <- data.frame(new)
new <- 0
new <- data.frame(new)
for(o in 1:length(tier2)){
new <- rbind(new,tier2[[o]])
}
new
View(new)
new
is.na(new)
any(is.na(new))
any( (str_detect(new, "^ $"))
any((str_detect(new, "^ $"))
(str_detect(new, "^ $")
str_detect(new, "^ $")
print(new)
new[[667]]
new[667]
new[[1]]
new[[3]]
new[3]
new[,3]
new[1,3]
new[1,4]
new[0,4]
View(new)
new$new
new$new[1]
new$new[667]
str_detect(new$new[,667], "  Organisation Name")
str_detect(new$new[667], "  Organisation Name")
str_detect(new$new[667], " Organisation Name")
" Organisation Name"
str_detect(new$new[667], "  Organisation Name")
for (i in length(tier3):1){
if( (str_detect(tier3[[i]], "  Organisation Name")) || (str_detect(tier3[[i]], "^ $")) || (str_detect(tier3[[i]], "^0$")) || (str_detect(tier3[[i]], "^$")) || (str_detect(tier3[[i]], " Organisation Name"))  ){
tier3[[i]] <- NULL
}
}
tier3 <- tier2
for (i in length(tier3):1){
if( (str_detect(tier3[[i]], "  Organisation Name")) || (str_detect(tier3[[i]], "^ $")) || (str_detect(tier3[[i]], "^0$")) || (str_detect(tier3[[i]], "^$")) || (str_detect(tier3[[i]], " Organisation Name"))  ){
tier3[[i]] <- NULL
}
}
tier2 <- tier3
temp<- 0
temp <- data.frame(temp)
for(o in 1:length(tier2)){
temp <- rbind(temp,tier2[[o]])
}
for (i in length(temp):1){
if( (str_detect(temp[i,], "  Organisation Name")) || (str_detect(tier3[i,], " Organisation Name")) || (str_detect(temp[i,], "^ $")) || (str_detect(temp[i,], "^0$")) || (str_detect(temp[i,], "^$")) ){
temp[i,] <- NULL
}
}
temp<- 0
temp <- data.frame(temp)
for(o in 1:length(tier2)){
temp <- rbind(temp,tier2[[o]])
}
View(temp)
View(temp)
View(tier2)
View(temp)
View(temp)
grep("^ ", temp)
grep(" ", temp)
grep("^ ", temp)
